<script type="text/javascript" src="html_common_methods.js"></script>

<script type="text/javascript">

    RED.nodes.registerType('ShelfAgent',{
        category: shelfAgentCategory,
        color: shelfAgentColor,
        defaults: {
            name: { value: shelfAgentName },
            agentId: { value: shelfAgentID },
            agentCurrentActionParametersInfo: { value: null },
        },
        inputs: shelfAgentNumberOfInputs,
        outputs: shelfAgentNumberOfOutputs,
        icon: shelfAgentIcon,
        label: shelfAgentLabel,

        oneditprepare : async function(){ 
            if(!this.ShelfAgent){
                this.ShelfAgent = new Agent(shelfAgentName,shelfAgentID);
            }
            await this.ShelfAgent.oneditPrepareFunction();
        },
        oneditcancel  : function()      { this.ShelfAgent.oneditCancelFunction(this);},
        oneditsave    : function()      { this.ShelfAgent.oneditSaveFunction(this);}
    });
</script>
