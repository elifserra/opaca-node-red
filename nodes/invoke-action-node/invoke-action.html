<script type="text/javascript" src="html_common_methods.js"></script>

<script type="text/javascript">
    
    RED.nodes.registerType('invoke-action', {
        category: invokeActionAgentCategory,
        color: invokeActionAgentColor,
        defaults: {
            name: { value: invokeActionAgentName },
            agentCurrentActionParametersInfo: { value: null },
        },
        inputs: invokeActionAgentNumberOfInputs,
        outputs: invokeActionAgentNumberOfOutputs,
        icon: invokeActionAgentIcon,
        label: invokeActionAgentLabel,
        
        oneditprepare: async function() {
            if(!this.Agent){
                this.Agent = new Agent(invokeActionAgentName, null);
            }
            await this.Agent.oneditPrepareFunction();
        },

        oneditcancel: function() { this.Agent.oneditCancelFunction(this); },
        
        oneditsave  : function() {  this.Agent.oneditSaveFunction(this)   },

    });

</script>
