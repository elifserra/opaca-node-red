<script type="text/javascript" src="html_common_methods.js"></script>

<script type="text/javascript">

    RED.nodes.registerType('HomeAssistantAgent',{
        category: homeAssistantAgentCategory,
        color   : homeAssistantAgentColor,
        defaults: {
            name: { value: homeAssistantAgentName },
            agentId: { value: homeAssistantAgentID },
            agentCurrentActionParametersInfo: { value: null },
        },
        inputs : homeAssistantAgentNumberOfInputs,
        outputs: homeAssistantAgentNumberOfOutputs,
        icon   : homeAssistantAgentIcon,
        labe   : homeAssistantAgentLabel,

        oneditprepare : async function(){ 
            if(!this.HomeAssistantAgent){
                this.HomeAssistantAgent = new Agent(homeAssistantAgentName,homeAssistantAgentID);
            }
            await this.HomeAssistantAgent.oneditPrepareFunction();
        },

        oneditcancel  : function()      { this.HomeAssistantAgent.oneditCancelFunction(this); },

        oneditsave    : function()      { this.HomeAssistantAgent.oneditSaveFunction(this);   }
    });
    
</script>
